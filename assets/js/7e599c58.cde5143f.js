"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[151],{4009:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>_,contentTitle:()=>A,default:()=>x,frontMatter:()=>C,metadata:()=>S,toc:()=>I});var n=t(7462),r=t(7294),o=t(3905),l=t(6010),s=t(2466),d=t(6550),i=t(1980),p=t(7392),u=t(12);function c(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:a,label:t,attributes:n,default:r}}=e;return{value:a,label:t,attributes:n,default:r}}))}function m(e){const{values:a,children:t}=e;return(0,r.useMemo)((()=>{const e=a??c(t);return function(e){const a=(0,p.l)(e,((e,a)=>e.value===a.value));if(a.length>0)throw new Error(`Docusaurus error: Duplicate values "${a.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[a,t])}function b(e){let{value:a,tabValues:t}=e;return t.some((e=>e.value===a))}function h(e){let{queryString:a=!1,groupId:t}=e;const n=(0,d.k6)(),o=function(e){let{queryString:a=!1,groupId:t}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:a,groupId:t});return[(0,i._X)(o),(0,r.useCallback)((e=>{if(!o)return;const a=new URLSearchParams(n.location.search);a.set(o,e),n.replace({...n.location,search:a.toString()})}),[o,n])]}function k(e){const{defaultValue:a,queryString:t=!1,groupId:n}=e,o=m(e),[l,s]=(0,r.useState)((()=>function(e){let{defaultValue:a,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!b({value:a,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${a}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return a}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:a,tabValues:o}))),[d,i]=h({queryString:t,groupId:n}),[p,c]=function(e){let{groupId:a}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(a),[n,o]=(0,u.Nk)(t);return[n,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:n}),k=(()=>{const e=d??p;return b({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{k&&s(k)}),[k]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!b({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),i(e),c(e)}),[i,c,o]),tabValues:o}}var g=t(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:a,block:t,selectedValue:o,selectValue:d,tabValues:i}=e;const p=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.o5)(),c=e=>{const a=e.currentTarget,t=p.indexOf(a),n=i[t].value;n!==o&&(u(a),d(n))},m=e=>{let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=p.indexOf(e.currentTarget)+1;a=p[t]??p[0];break}case"ArrowLeft":{const t=p.indexOf(e.currentTarget)-1;a=p[t]??p[p.length-1];break}}a?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":t},a)},i.map((e=>{let{value:a,label:t,attributes:s}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:o===a?0:-1,"aria-selected":o===a,key:a,ref:e=>p.push(e),onKeyDown:m,onClick:c},s,{className:(0,l.Z)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":o===a})}),t??a)})))}function N(e){let{lazy:a,children:t,selectedValue:n}=e;if(t=Array.isArray(t)?t:[t],a){const e=t.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},t.map(((e,a)=>(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==n}))))}function w(e){const a=k(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",f.tabList)},r.createElement(v,(0,n.Z)({},e,a)),r.createElement(N,(0,n.Z)({},e,a)))}function y(e){const a=(0,g.Z)();return r.createElement(w,(0,n.Z)({key:String(a)},e))}const E={tabItem:"tabItem_Ymn6"};function T(e){let{children:a,hidden:t,className:n}=e;return r.createElement("div",{role:"tabpanel",className:(0,l.Z)(E.tabItem,n),hidden:t},a)}const C={title:"Cops and Robbers"},A="cops-and-robbers",S={unversionedId:"resources/cops-and-robbers/index",id:"resources/cops-and-robbers/index",title:"Cops and Robbers",description:"---",source:"@site/docs/resources/cops-and-robbers/index.md",sourceDirName:"resources/cops-and-robbers",slug:"/resources/cops-and-robbers/",permalink:"/docs/resources/cops-and-robbers/",draft:!1,editUrl:"https://github.com/OddoAkbar/docs/tree/main/docs/resources/cops-and-robbers/index.md",tags:[],version:"current",frontMatter:{title:"Cops and Robbers"},sidebar:"tutorialSidebar",previous:{title:"Resources",permalink:"/docs/resources/"}},_={},I=[{value:"Installation",id:"installation",level:2},{value:"Download",id:"download",level:3},{value:"Setting up",id:"setting-up",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Integrating",id:"integrating",level:2},{value:"How to use Editor",id:"how-to-use-editor",level:2},{value:"How to add a new Map Type",id:"how-to-add-a-new-map-type",level:2},{value:"How to add new Weapons",id:"how-to-add-new-weapons",level:2},{value:"How to add a new Locale",id:"how-to-add-a-new-locale",level:2},{value:"How to management permissions",id:"how-to-management-permissions",level:2},{value:"Editor",id:"editor",level:2},{value:"Client exports",id:"client-exports",level:2},{value:"<code>displayMatchmaking</code>",id:"displaymatchmaking",level:3},{value:"<code>hideMatchmaking</code>",id:"hidematchmaking",level:3},{value:"Client Events",id:"client-events",level:2},{value:"<code>copsandrobbers:matchStart</code>",id:"copsandrobbersmatchstart",level:3},{value:"<code>copsandrobbers:matchFinished</code>",id:"copsandrobbersmatchfinished",level:3},{value:"<code>copsandrobbers:roundStart</code>",id:"copsandrobbersroundstart",level:3},{value:"<code>copsandrobbers:roundEnd</code>",id:"copsandrobbersroundend",level:3},{value:"<code>copsandrobbers:teamSwap</code>",id:"copsandrobbersteamswap",level:3},{value:"<code>copsandrobbers:playerFatalDamaged</code>",id:"copsandrobbersplayerfataldamaged",level:3},{value:"<code>copsandrobbers:playerRevive</code>",id:"copsandrobbersplayerrevive",level:3},{value:"<code>copsandrobbers:startSpectating</code>",id:"copsandrobbersstartspectating",level:3},{value:"<code>copsandrobbers:stopSpectating</code>",id:"copsandrobbersstopspectating",level:3},{value:"<code>copsandrobbers:editor:started</code>",id:"copsandrobberseditorstarted",level:3},{value:"<code>copsandrobbers:editor:stopped</code>",id:"copsandrobberseditorstopped",level:3},{value:"Server exports",id:"server-exports",level:2},{value:"<code>getPlayerNameCallback</code>",id:"getplayernamecallback",level:3},{value:"Server events",id:"server-events",level:2},{value:"<code>copsandrobbers:createdMatch</code>",id:"copsandrobberscreatedmatch",level:3},{value:"<code>copsandrobbers:matchFinished</code>",id:"copsandrobbersmatchfinished-1",level:3},{value:"<code>copsandrobbers:roundStart</code>",id:"copsandrobbersroundstart-1",level:3},{value:"<code>copsandrobbers:roundEnd</code>",id:"copsandrobbersroundend-1",level:3},{value:"Common errors",id:"common-errors",level:2},{value:"Error parsing script / Failed to load script",id:"error-parsing-script--failed-to-load-script",level:3},{value:"You lack the required entitlement to use cops-and-robbers",id:"you-lack-the-required-entitlement-to-use-cops-and-robbers",level:3},{value:"Failed to verify protected resource",id:"failed-to-verify-protected-resource",level:3},{value:"Credits",id:"credits",level:2}],M={toc:I},O="wrapper";function x(e){let{components:a,...r}=e;return(0,o.kt)(O,(0,n.Z)({},M,r,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"cops-and-robbers"},"cops-and-robbers"),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"A tactical team-based shooter for FiveM")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Cops and Robberts",src:t(9040).Z,width:"1920",height:"1080"})),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("h3",{id:"download"},"Download"),(0,o.kt)("p",null,"After the purchase you will receive an email from Tebex containing the instructions to download the resource."),(0,o.kt)("p",null,"Alternatively, you can go to ",(0,o.kt)("a",{parentName:"p",href:"https://keymaster.fivem.net/asset-grants"},"https://keymaster.fivem.net/asset-grants")," and download it."),(0,o.kt)("h3",{id:"setting-up"},"Setting up"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Extract the ",(0,o.kt)("inlineCode",{parentName:"p"},"cops-and-robbers.pack.zip")," file to a folder called ",(0,o.kt)("inlineCode",{parentName:"p"},"cops-and-robbers")," inside your resources folder.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add the following to your ",(0,o.kt)("inlineCode",{parentName:"p"},"server.cfg")," to start the resource."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cfg"},"ensure cops-and-robbers\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"In game you can use ",(0,o.kt)("inlineCode",{parentName:"li"},"cops_and_robbers")," command to open Matchmaking UI.")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"All the configurations for the mini-game and the matchmaking are in the file config.lua. Tweak it to best suit your needs."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'LOCALE = {\n  LANGUAGE = \'en\' -- Default language\n}\n\nGAME_CONFIG = {\n  MAX_ROUNDS = 8, -- Maximum rounds of each match\n  TIME_TO_ROUND_END_IN_MS = 1 * 60 * 1000, -- Time for the round to end giving victory to robbers\n\n  TIME_TO_DESTROY_GAME = 30 * 1000, -- Timeout to clean up a game after it finishes\n\n  DEFAULT_TIME_TO_HIDE_NOTIFICATIONS_IN_MS = 10 * 1000, -- Default time to hide notifications\n  TIME_WAITED_TO_START_SPECTATING_IN_MS = 5 * 1000, -- Time after death to start spectating a teammate\n\n  TEAM_COLORS = {\n    COPS = "#39608b",\n    ROBBERS = "#82412d"\n  } -- Team related colors\n}\n\nMATCHMAKING_CONFIG = {\n  TIME_TO_START_ROUND_IN_MS = 15 * 1000, -- Time to start the first round\n  TIMEOUT_TO_START_MATCH_IN_MS = 15 * 1000, -- Timeout to start the first round after creating a match\n\n  MAX_ITEMS_PER_PAGE = 20 -- Maximum items per page in lobby pagination\n}\n\nBUCKET_CONFIG = { -- Configuration related to FiveM routing bucket\n  POPULATION_ENABLED = false,\n  LOCKDOWN_MODE = \'strict\'\n}\n\nINPUT_CONFIG = { -- Configuration related to FiveM key mapping\n  SCOREBOARD = {\n      KEY = "tab", -- Default key\n      MAPPER = "keyboard", -- Default mapper (optional)\n  },\n  SELECT_LONG_WEAPON = {\n      KEY = "1",\n      MAPPER = "keyboard",\n  },\n  SELECT_SHORT_WEAPON = {\n      KEY = "2",\n      MAPPER = "keyboard",\n  },\n  SELECT_MELLE_WEAPON = {\n      KEY = "3",\n      MAPPER = "keyboard",\n  },\n  SPECTATE_NEXT_PLAYER = {\n      KEY = "MOUSE_LEFT",\n      MAPPER = "MOUSE_BUTTON",\n  }\n}\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"integrating"},"Integrating"),(0,o.kt)("p",null,"By design, we don't bake framework support in our scripts. All of our creations are standalone, but they can be easily integrated with the framework of your preference."),(0,o.kt)("p",null,"Here are some examples of how to integrate this script to some of the most common frameworks in the FiveM community."),(0,o.kt)(y,{mdxType:"Tabs"},(0,o.kt)(T,{value:"standalone",label:"Standalone",mdxType:"TabItem"},(0,o.kt)("p",null,"This resource is standalone by default, so you can safely download it and put it on your server.")),(0,o.kt)(T,{value:"qb",label:"QB",mdxType:"TabItem"},(0,o.kt)("p",null,"This resource is standalone, but to make the better compatibility in qb-core need some changes in others resource, some like remove default HUD, inventory, health system and others stuffs when playing."),(0,o.kt)("p",null,"QB support is still a work in progress. You can stay tuned to Discord channels to know when it's out.")),(0,o.kt)(T,{value:"esx",label:"ESX",mdxType:"TabItem"},(0,o.kt)("p",null,"This resource is standalone, but to make the better compatibility in esx need some changes in others resource like HUD, inventory, health system and others stuffs when playing."),(0,o.kt)("p",null,"ESX support is still a work in progress. You can stay tuned to Discord channels to know when it's out."))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"how-to-use-editor"},"How to use Editor"),(0,o.kt)("p",null,"We create a great editor for edit maps, weapons groups, outfits and much more"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"First we need configurate your permissions to open editor. See ",(0,o.kt)("a",{parentName:"p",href:"#how-to-management-permissions"},"How to management permissions"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Now you can use this command to open Editor UI ",(0,o.kt)("inlineCode",{parentName:"p"},"cops_and_robbers editor"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Thats it for more examples see ",(0,o.kt)("a",{parentName:"p",href:"#editor"},"Editor")," section"))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"how-to-add-a-new-map-type"},"How to add a new Map Type"),(0,o.kt)("p",null,"Map types are used for filtering maps in the matchmaking system. Players can select an option and find a random map for their match."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to ",(0,o.kt)("inlineCode",{parentName:"p"},"data/maps/")," and open ",(0,o.kt)("inlineCode",{parentName:"p"},"types.json"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add your map type configuration. Example:"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="types.json"',title:'"types.json"'},'{\n  "type": "jewelry", // Type used when declaring the map\n  "maxPlayersPerTeam": 6 // Max players per team\n}\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"how-to-add-new-weapons"},"How to add new Weapons"),(0,o.kt)("p",null,"You can add new weapons to the game. This resource have all GTA weapons added."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add weapon icon inside folder ",(0,o.kt)("inlineCode",{parentName:"p"},"data/weapons/icons"),", example: ",(0,o.kt)("inlineCode",{parentName:"p"},"data/weapons/icons/weapon_dagger.png"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add weapon data in ",(0,o.kt)("inlineCode",{parentName:"p"},"data/weapons/weapons.json"),"."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="weapons.json"',title:'"weapons.json"'},'{\n  "id": "weapon_dagger", // weapon name\n  "type": "MELLE_WEAPON", // weapon type (MELLE_WEAPON, SHORT_WEAPON, LONG_WEAPON, THROWABLE, MISC)\n  "icon": "weapon_dagger.png" // icon filename added in `data/weapons/icons/`\n}\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"how-to-add-a-new-locale"},"How to add a new Locale"),(0,o.kt)("p",null,"Localization are used to all text in this resource."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to ",(0,o.kt)("inlineCode",{parentName:"p"},"data/locales")," folder, and create a new json, with name to locale to be added.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy all content in ",(0,o.kt)("inlineCode",{parentName:"p"},"data/locales/en.json")," and paste it into the json file you created.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Start your translation."))),(0,o.kt)("p",null,"Also you can change the current locale in ",(0,o.kt)("inlineCode",{parentName:"p"},"config.lua"),", see ",(0,o.kt)("a",{parentName:"p",href:"#configuration"},(0,o.kt)("inlineCode",{parentName:"a"},"Configuration"))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"how-to-management-permissions"},"How to management permissions"),(0,o.kt)("p",null,"Permissions are used in editor."),(0,o.kt)("p",null,"We use permission system provided by Fivem, see this forum post ",(0,o.kt)("a",{parentName:"p",href:"https://forum.cfx.re/t/basic-aces-principals-overview-guide/90917"},(0,o.kt)("inlineCode",{parentName:"a"},"Basic Aces & Principals overview/guide"))," for more information about how to use this permissions."),(0,o.kt)("p",null,"But here have a quick setup:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First you need add permission to user like in above example. Remember change XXXXXX to you steam HEX")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cfg"},"add_principal identifier.steam:XXXXXX group.admin\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Add Permission to you group to access Cops and Robbers.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cfg"},'# Cops and robbers editor\nadd_ace group.admin "cops_and_robbers.editor" allow\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"editor"},"Editor"),(0,o.kt)("p",null,"Editor section"),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"client-exports"},"Client exports"),(0,o.kt)("h3",{id:"displaymatchmaking"},(0,o.kt)("inlineCode",{parentName:"h3"},"displayMatchmaking")),(0,o.kt)("p",null,"Display Matchmaking UI"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"exports['cops-and-robbers']:displayMatchmaking()\n")),(0,o.kt)("h3",{id:"hidematchmaking"},(0,o.kt)("inlineCode",{parentName:"h3"},"hideMatchmaking")),(0,o.kt)("p",null,"Hide Matchmaking UI"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"exports['cops-and-robbers']:displayMatchmaking()\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"client-events"},"Client Events"),(0,o.kt)("h3",{id:"copsandrobbersmatchstart"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:matchStart")),(0,o.kt)("p",null,"Triggered when match started"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field mapId number\n--- @field teams table\n--- @field weaponGroup number\n--- @field weather table\n\nAddEventHandler("copsandrobbers:matchStarted", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersmatchfinished"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:matchFinished")),(0,o.kt)("p",null,"Triggered when match finished"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field winnerTeamId number\n\nAddEventHandler("copsandrobbers:matchFinished", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersroundstart"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:roundStart")),(0,o.kt)("p",null,"Triggered when round started"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field gameId number\n--- @field roundStartAt number\n--- @field roundEndAt number\n\nAddEventHandler("copsandrobbers:roundStart", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersroundend"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:roundEnd")),(0,o.kt)("p",null,"Triggered when round end"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field winnerTeamId number\n--- @field reason enum(TeamExtermination = 1, Timeout = 2)\n\nAddEventHandler("copsandrobbers:roundEnd", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersteamswap"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:teamSwap")),(0,o.kt)("p",null,"Triggered when swap teams"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:teamSwap", function() end)\n')),(0,o.kt)("h3",{id:"copsandrobbersplayerfataldamaged"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:playerFatalDamaged")),(0,o.kt)("p",null,"Triggered when local player dead"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:playerFatalDamaged", function(culpritServerId, assistServerId, weaponHash, wasHeadshot)\n  print(culpritServerId, assistServerId, weaponHash, wasHeadshot)\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersplayerrevive"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:playerRevive")),(0,o.kt)("p",null,"Triggered when local player revive"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:playerRevive", function() end)\n')),(0,o.kt)("h3",{id:"copsandrobbersstartspectating"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:startSpectating")),(0,o.kt)("p",null,"Triggered when start spectating"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:startSpectating", function() end)\n')),(0,o.kt)("h3",{id:"copsandrobbersstopspectating"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:stopSpectating")),(0,o.kt)("p",null,"Triggered when stop spectating"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:stopSpectating", function() end)\n')),(0,o.kt)("h3",{id:"copsandrobberseditorstarted"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:editor:started")),(0,o.kt)("p",null,"Triggered when start editor"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:editor:started", function() end)\n')),(0,o.kt)("h3",{id:"copsandrobberseditorstopped"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:editor:stopped")),(0,o.kt)("p",null,"Triggered when stop editor"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:editor:stopped", function() end)\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"server-exports"},"Server exports"),(0,o.kt)("h3",{id:"getplayernamecallback"},(0,o.kt)("inlineCode",{parentName:"h3"},"getPlayerNameCallback")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"---@param fn A function that is executed when get player name\nexports['cops-and-robbers']:getPlayerNameCallback(function(playerServerId)\n  -- TODO\nend)\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"server-events"},"Server events"),(0,o.kt)("h3",{id:"copsandrobberscreatedmatch"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:createdMatch")),(0,o.kt)("p",null,"Triggered when one match is created"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:createdMatch", function(game)\n  print(json.encode(game))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersmatchfinished-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:matchFinished")),(0,o.kt)("p",null,"Triggered when one match finish"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'AddEventHandler("copsandrobbers:matchFinished", function(game)\n  print(json.encode(game))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersroundstart-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:roundStart")),(0,o.kt)("p",null,"Triggered when round start"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field gameId number\n--- @field roundStartAt number\n--- @field roundEndAt number\n\nAddEventHandler("copsandrobbers:roundStart", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("h3",{id:"copsandrobbersroundend-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"copsandrobbers:roundEnd")),(0,o.kt)("p",null,"Triggered when round end"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'--- @table data\n--- @field gameId number\n--- @field winnerTeamId number\n--- @field reason enum(TeamExtermination = 1, Timeout = 2)\n\nAddEventHandler("copsandrobbers:roundEnd", function(data)\n  print(json.encode(data))\nend)\n')),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"common-errors"},"Common errors"),(0,o.kt)("h3",{id:"error-parsing-script--failed-to-load-script"},"Error parsing script / Failed to load script"),(0,o.kt)("p",null,"Your server artifacts are likely outdated. Update your server to version 5181 or above."),(0,o.kt)("h3",{id:"you-lack-the-required-entitlement-to-use-cops-and-robbers"},"You lack the required entitlement to use cops-and-robbers"),(0,o.kt)("p",null,"Try restarting your server and make sure your server license key is correct. If you bought the resource on the wrong account, you can transfer it to another account on keymaster."),(0,o.kt)("h3",{id:"failed-to-verify-protected-resource"},"Failed to verify protected resource"),(0,o.kt)("p",null,"Files were possibly corrupted during transfer. Ensure hidden files are copied; the .fxap file in a protected resource must be included. Some FTP programs skip these files."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"credits"},"Credits"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/pedr0fontoura"},"pedr0fontoura")," for the help to develop this resource.")))}x.isMDXComponent=!0},9040:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/cops-and-robbers-banner-21532ccaf04df0e394a6d4bcc1b01c8b.png"}}]);